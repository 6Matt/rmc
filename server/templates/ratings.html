{% import 'macros.html' as macros %}

{% call macros.us_template('ratings-tpl') %}
<div class="ratings <%- editOnly ? 'edit-only' : '' %> <%- readOnly ? 'read-only' : '' %>">
  <% ratings.each(function(rating) { %>
    <div class="row-fluid">
      <div class="rating-name span3">
        <%- rating.getDisplayName() %>
      </div>
      <div class="rating-bar-span span8">
        <% if (!editOnly) { %>
          <div class="shown-rating">
            <div class="rating-progress progress <%- rating.getClass() %>">
              <div class="rating-bar bar active" style="width: 0%;"></div>
            </div>
          </div>
        <% } %>

        <% if (!readOnly) { %>
          <div class="input-rating <%- editOnly ? '' : 'hide-initial' %>">
            {# TODO(david): 5 should not be hardcoded #}
            <% for (var i = 0; i < 5; ++i) { %>
              <div class="rating-progress progress <%- rating.getClass() %>">
                <div class="rating-bar active"></div>
              </div>
            <% } %>
          </div>
        <% } %>

      </div>
      <% if (!editOnly) { %>
        <div class="shown-rating-num rating-num-span span1">
          <%- rating.getDisplayRating() %>
        </div>
      <% } %>
      <div class="hide-initial input-rating-num rating-num-span span1">
      </div>
    </div>
    <% }); %>
</div>
{% endcall %}

{% call macros.us_template('rating-box-tpl') %}
<div class="rating-box badge badge-inverse">
  <div class="rating"><%- getDisplayRating(rating, count) %></div>
  <div class="num-ratings">
    <%- count %> <%- pluralize(count, 'rating', 'ratings') %>
  </div>
</div>
{% endcall %}

{% call macros.us_template('binary-rating-tpl') %}
<div class="row-fluid">
  <span class="span5 choice-name"><%- name %>?</span>
  <span class="span7 btn-group rating-choices">
    <button type="button" class="btn yes-btn">
      <i class="thumb-icon icon-thumbs-up"></i>
      Yes
    </button>
    <button type="button" class="btn no-btn">
      <i class="thumb-icon icon-thumbs-down"></i>
      No
    </button>
  </span>
</div>
{% endcall %}
