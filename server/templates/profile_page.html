{% extends 'base_page.html' %}

{% import 'macros.html' as macros %}

{% block stylesheets %}
  <link rel="stylesheet" href="/static/css/profile_page.css?1">
{% endblock %}

{% set nav_item = "profile" %}

{% block page_title %}
  {{ profile_obj['name'] }}
{% endblock %}

{# TODO(david): duplication of row-fluid container-fluid code #}
{# TODO(david): put vertical align in CSS stylesheet #}
{% block header %}
  <div class="container-fluid course-header">
    <div class="row-fluid">
      <div class="span10">
  <h1 style="vertical-align: bottom;">
    <img class="profile-pic img-polaroid" src="{{ profile_obj['fb_pic_url'] }}">
    {{ profile_obj['name'] }}
    {% if profile_obj['program_name'] %}
    &nbsp;
      <span class="muted" style="vertical-align: bottom;">
        {% if profile_obj['last_program_year_id'] %}
        {{ profile_obj['last_program_year_id'] }}
        {% endif %}
        {{ profile_obj['program_name'] }}
      </span>
    {% endif %}
  </h1>
      </div>
    </div>
  </div>
{% endblock %}

{% block body %}
  <div class="row-fluid">
    <div class="span3 well" id="friend-sidebar-container">
    </div>
    <div class="span9" id="profile-container">
      <div id="term-collection-container"></div>
      {% if profile_obj['own_profile'] %}
        <div id="transcript-container">
          <h2>Import Transcript from Quest</h2>
            <p id="transcript-instructions">
              Copy and paste your
              <a target="_blank"
                href="https://quest.pecs.uwaterloo.ca/psp/SS/?cmd=login">
                transcript from Quest</a>,
              and <strong>your course history will magically appear</strong> here!
            </p>
            <textarea id="transcript-text" placeholder="Feed me a transcript! Mmm... transcripts...." wrap="off"></textarea>
            <p id="transcript-remove-text">
            </p>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}

{% block footer %}
{% endblock %}

{# TODO(david): Have underscore templates specify their deps. #}
{% block templates %}
  {% include 'friend.html' %}
  {% include 'course.html' %}
  {% include 'term.html' %}
  {% include 'ratings.html' %}
  {% include 'user_course.html' %}
  <script>
    window.pageData.transcriptData = {{ transcript_data|safe }};
  </script>
{% endblock %}

{% block scripts %}
<script>
  window.pageData.profileObj = {{ profile_obj|tojson|safe }};
</script>
{% endblock %}
