{% extends 'base_page.html' %}

{% import 'macros.html' as macros %}

{% block stylesheets %}
  <link rel="stylesheet" href="/static/css/profile_page.css?1">
{% endblock %}

{% set nav_item = "profile" %}

{% block page_title %}
  {% if profile_obj['own_profile'] %}
    My
  {% else %}
    {{ profile_obj['name'] }}'s
  {% endif %}
  Profile
{% endblock %}

{% block header %}
  {{ macros.page_title(self.page_title()) }}
{% endblock %}

{% block body %}
  <div class="row-fluid">
    <div class="span3 well" id="friend-sidebar-container">
    </div>
    <div class="span9" id="profile-container">
      <div id="term-collection-container"></div>
      {% if profile_obj['own_profile'] %}
        <div id="transcript-container">
          <h2>Import Transcript from Quest</h2>
            <p id="transcript-instructions">
              Copy and paste your
              <a target="_blank"
                href="https://quest.pecs.uwaterloo.ca/psp/SS/?cmd=login">
                transcript from Quest</a>,
              and <strong>your course history will magically appear</strong> here!
            </p>
            <textarea id="transcript-text" placeholder="Feed me a transcript! Mmm... transcripts...." wrap="off"></textarea>
            <p id="transcript-remove-text">
            </p>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}

{% block footer %}
{% endblock %}

{# TODO(david): Have underscore templates specify their deps. #}
{% block templates %}
  {% include 'friend.html' %}
  {% include 'course.html' %}
  {% include 'term.html' %}
  {% include 'ratings.html' %}
  {% include 'user_course.html' %}
  <script>
    window.pageData.transcriptData = {{ transcript_data|safe }};
  </script>
{% endblock %}

{% block scripts %}
<script>
  window.pageData.profileObj = {{ profile_obj|tojson|safe }};
</script>
{% endblock %}
