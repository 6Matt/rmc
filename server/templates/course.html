{% import 'macros.html' as macros %}

{% call macros.us_template('course-tpl') %}
<!-- TODO(david) FIXME: Hotspot needs to be bigger -->
<div class="visible-section">
  <div class="course-code"><%- code %></div>
  <div class="course-name"><%- name %></div>
  <!-- TODO(mack): include functions to handle singular/plural -->
  <div class="rating-box badge badge-inverse">
    <div class="rating"><%- _s.sprintf('%.1f', rating) %></div>
    <div class="num-ratings"><%- numRatings %> ratings</div>
  </div>
  <div class="sample-friends-placeholder">
  </div>
  {# TODO(david): This is really dumb. Fix in a better way. #}
  <div style="clear: both; margin-bottom: -25px;"></div>
</div>

<div class="expand-section hide-initial">
  <div class="row-fluid">
    <div class="span6">
      <p class="description"><%- description %></p>
      <!-- TODO(david): Put this in when we get data for this. -->
      <!--<div class="terms-offered">-->
        <!--<span class="label fall">F</span>-->
        <!--<span class="label winter">W</span>-->
        <!--<span class="label spring">S</span>-->
      <!--</div>-->
    </div>
    <div class="span6">
      <div class="ratings-placeholder"></div>
      <blockquote class="course-tip pull-right">
        <p>
          This course has a really fun project! The exams were reasonable.
          Overall, this was probably my favourite course I've taken so far.
        </p>
        <small>Mack Duan with Prof. Charlie Clarke</small>
      </blockquote>
    </div>
  </div>

  <div class="row-fluid">
    <div class="span12">
      <div class="alert alert-info user-review-box">
        <div class="review-placeholder"></div>
      </div>
    </div>
  </div>
</div>
{% endcall %}

{% call macros.us_template('sample-friends-tpl') %}
<div class="friend-collection-placeholder"></div>
<div class="friend-info">
  <% var numFriends = friendCollection.length; %>
  <% var remaining = Math.max(numFriends - maxSampleFriends, 0); %>
  <% if (remaining > 0) { %>
    and <%- remaining %>
    <a href="#" rel="popover" class="remaining-friends">
      other <%- pluralize(remaining, 'friend', 'friends') %>
    </a>
  <% } %>
</div>

{% endcall %}

{% call macros.us_template('course-friends-hovercard-tpl') %}
{% endcall %}

{% call macros.us_template('course-friend-tpl') %}
<a href="<%- profileUrl %>">
  <img class="friend-pic-img" src="<%- fbPicUrl %>">
</a>
{% endcall %}
